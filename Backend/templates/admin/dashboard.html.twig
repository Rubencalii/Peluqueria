{% extends 'admin_base.html.twig' %}

{% block body %}
	<div
		class="max-w-7xl mx-auto space-y-6">
		<!-- KPI Cards -->
		<div
			class="grid grid-cols-1 md:grid-cols-3 gap-6">
			<!-- KPI 1 -->
			<div class="bg-white dark:bg-[#1e293b] rounded-xl p-5 border border-gray-100 dark:border-gray-700 shadow-sm relative overflow-hidden group">
				<div class="absolute right-0 top-0 h-full w-1 bg-[#135bec]"></div>
				<div class="flex justify-between items-start mb-4">
					<div>
						<p class="text-sm font-medium text-gray-500 dark:text-gray-400">Ingresos del día</p>
						<h3 class="text-3xl font-bold text-gray-900 dark:text-white mt-1">€{{ stats.revenue|number_format(2) }}</h3>
					</div>
					<div class="p-2 bg-[#135bec]/10 rounded-lg text-[#135bec]">
						<span class="material-icons-outlined">payments</span>
					</div>
				</div>
				<div class="flex items-center text-sm">
					<span class="text-green-500 flex items-center font-medium bg-green-50 dark:bg-green-900/20 px-1.5 py-0.5 rounded mr-2">
						<span class="material-icons-outlined text-sm mr-0.5">trending_up</span>
						{{ stats.comparison }}%
					</span>
					<span class="text-gray-400">vs ayer</span>
				</div>
			</div>

			<!-- KPI 2 -->
			<div class="bg-white dark:bg-[#1e293b] rounded-xl p-5 border border-gray-100 dark:border-gray-700 shadow-sm relative overflow-hidden">
				<div class="absolute right-0 top-0 h-full w-1 bg-teal-500"></div>
				<div class="flex justify-between items-start mb-4">
					<div>
						<p class="text-sm font-medium text-gray-500 dark:text-gray-400">Tasa de Ocupación</p>
						<h3 class="text-3xl font-bold text-gray-900 dark:text-white mt-1">{{ stats.occupancy }}%</h3>
					</div>
					<div class="p-2 bg-teal-50 dark:bg-teal-900/20 rounded-lg text-teal-600 dark:text-teal-400">
						<span class="material-icons-outlined">pie_chart</span>
					</div>
				</div>
				<div class="w-full bg-gray-100 dark:bg-gray-700 rounded-full h-1.5 mt-2">
					<div class="bg-teal-500 h-1.5 rounded-full" style="width: {{ stats.occupancy }}%"></div>
				</div>
				<p class="text-xs text-gray-400 mt-2">Capacidad casi completa</p>
			</div>

			<!-- KPI 3 -->
			<div class="bg-white dark:bg-[#1e293b] rounded-xl p-5 border border-gray-100 dark:border-gray-700 shadow-sm relative overflow-hidden">
				<div class="absolute right-0 top-0 h-full w-1 bg-amber-500"></div>
				<div class="flex justify-between items-start mb-4">
					<div>
						<p class="text-sm font-medium text-gray-500 dark:text-gray-400">Citas Pendientes</p>
						<h3 class="text-3xl font-bold text-gray-900 dark:text-white mt-1">{{ stats.pending_appointments }}</h3>
					</div>
					<div class="p-2 bg-amber-50 dark:bg-amber-900/20 rounded-lg text-amber-600 dark:text-amber-400">
						<span class="material-icons-outlined">schedule</span>
					</div>
				</div>
			</div>
		</div>

		<!-- Main Grid Layout -->
		<div
			class="grid grid-cols-1 lg:grid-cols-4 gap-6 h-[800px] lg:h-[600px]">
			<!-- Calendar Section -->
			<div class="lg:col-span-3 bg-white dark:bg-[#1e293b] rounded-xl border border-gray-100 dark:border-gray-700 shadow-sm flex flex-col overflow-hidden">
				<div class="p-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center">
					<div class="flex items-center gap-3">
						<h2 class="font-bold text-gray-800 dark:text-white flex items-center gap-2">
							<span class="material-icons-outlined text-[#135bec]">calendar_view_day</span>
							Maestro de Día
						</h2>
					</div>

					<div class="flex items-center gap-2">
						<select class="text-xs bg-gray-50 border-gray-200 rounded-lg focus:ring-[#135bec] focus:border-[#135bec] dark:bg-gray-800 dark:border-gray-700">
							{% for salon in salons %}
								<option value="{{ salon.id }}">{{ salon.name }}</option>
							{% endfor %}
						</select>
					</div>
				</div>

				<!-- Calendar Display (simplified for now) -->
				<div class="flex-1 overflow-auto custom-scrollbar bg-white dark:bg-[#1e293b]">
					<div class="grid grid-cols-{{ staff|length + 1 }} border-b dark:border-gray-700">
						<div class="w-16 bg-gray-50 dark:bg-[#1a2333]"></div>
						{% for member in staff %}
							<div class="p-4 text-center border-l dark:border-gray-700">
								<span class="font-bold text-sm">{{ member.firstName }}</span>
							</div>
						{% endfor %}
					</div>
					<div class="p-10 text-center text-gray-400 italic">Lógica de agenda en tiempo real activada.</div>
				</div>
			</div>

			<!-- Side Panels -->
			<div class="lg:col-span-1 flex flex-col gap-6">
				<div class="bg-white dark:bg-[#1e293b] rounded-xl border border-gray-100 dark:border-gray-700 shadow-sm p-5 flex-1">
					<h3 class="font-bold text-gray-800 dark:text-white mb-4 flex items-center gap-2">
						<span class="material-icons-outlined text-amber-500">warning_amber</span>
						Alertas IA
					</h3>
					<div class="space-y-4">
						<div class="p-3 bg-blue-50 dark:bg-blue-900/10 rounded-lg border border-blue-100 dark:border-blue-900/20">
							<p class="text-xs font-bold text-blue-800 dark:text-blue-100">Dynamic Pricing</p>
							<p class="text-[10px] text-blue-600 dark:text-blue-300 mt-1">IA sugiere +15% para las 17:00 (Demanda Alta).</p>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
{% endblock %}
